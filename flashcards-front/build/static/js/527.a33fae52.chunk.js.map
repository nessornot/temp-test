{"version":3,"file":"static/js/527.a33fae52.chunk.js","mappings":"wJAGA,MAaA,EAbuBA,IAAmB,IAAlB,SAAEC,GAAUD,EAChC,MAAME,GAAWC,EAAAA,EAAAA,MASjB,OAPAC,EAAAA,EAAAA,YAAU,KACQC,aAAaC,QAAQ,aAE/BJ,EAAS,WACb,GACD,CAACA,IAEGD,CAAQ,C,uGCNJ,SAASM,IACpB,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,KAC1BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,IAEnCR,GAAWC,EAAAA,EAAAA,MAwBjB,OACIU,EAAAA,EAAAA,KAACC,EAAAA,EAAc,CAAAb,UACfc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,QAAOf,SAAA,EAClBY,EAAAA,EAAAA,KAACI,EAAAA,EAAM,KACPJ,EAAAA,EAAAA,KAAA,OAAKG,UAAU,iBAAgBf,UAC3BY,EAAAA,EAAAA,KAAA,OAAKG,UAAU,YAAWf,UACtBc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yBAAwBf,SAAA,EACnCY,EAAAA,EAAAA,KAAA,OAAKG,UAAU,eAAcf,SAAC,wEAG9Bc,EAAAA,EAAAA,MAAA,QAAMC,UAAU,cAAcE,SAhC7BC,UACjBC,EAAEC,iBAEF,MAAMC,QAAiBC,EAAAA,EAAAA,IAAUf,EAAMG,GACvC,GAAwB,MAApBW,EAASE,OAET,YADAC,MAAM,8HAIV,IAAKH,EAASI,GAAI,CACd,MAAMC,QAAaL,EAASK,OAE5B,YADAC,QAAQC,MAAM,mFAAmBF,EAErC,CAEA,MAAMG,QAAaR,EAASS,OAC5B1B,aAAa2B,QAAQ,WAAYF,EAAKG,OAEtC/B,EAAS,YACT0B,QAAQM,IAAIJ,EAAKG,MAAM,EAa8ChC,SAAA,EAGjDc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBf,SAAA,EAC/BY,EAAAA,EAAAA,KAAA,SACIsB,QAAQ,iBACRnB,UAAU,4BAA2Bf,SAAC,iGAG1CY,EAAAA,EAAAA,KAAA,SAAOuB,GAAG,iBAAiBC,KAAK,OACzBC,YAAY,mEACZtB,UAAU,4BACVuB,MAAO/B,EAAMgC,UAAQ,EAC5BC,SAAWrB,GAAMX,EAAQW,EAAEsB,OAAOH,aAItCxB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qBAAoBf,SAAA,EAC/BY,EAAAA,EAAAA,KAAA,SACIsB,QAAQ,iBACRnB,UAAU,4BAA2Bf,SAAC,0CAG1CY,EAAAA,EAAAA,KAAA,SAAOuB,GAAG,iBAAiBC,KAAK,WACzBC,YAAY,qFACZtB,UAAU,4BACVuB,MAAO5B,EAAU6B,UAAQ,EAChCC,SAAWrB,GAAMR,EAAYQ,EAAEsB,OAAOH,aAI1C1B,EAAAA,EAAAA,KAAA,UAAQG,UAAU,gBAAgBqB,KAAK,SAAQpC,SAAC,uCAKpDc,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mBAAkBf,SAAA,CAAC,wEAE9BY,EAAAA,EAAAA,KAAA,KAAG8B,KAAK,YAAY3B,UAAU,yBAAwBf,SAAC,+HAUnF,C","sources":["components/RedirectIfAuth/RedirectIfAuth.js","pages/Login/Login.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst RedirectIfAuth = ({ children }) => {\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const token = localStorage.getItem('jwtToken');\n        if (token) {\n            navigate('/library');\n        }\n    }, [navigate]);\n\n    return children;\n};\n\nexport default RedirectIfAuth;\n","import React, {useState} from 'react'\nimport Header from \"../../components/Header/header\";\nimport \"./Login.scss\"\nimport { loginUser } from \"../../services/auth\";\nimport { useNavigate} from \"react-router-dom\";\nimport RedirectIfAuth from \"../../components/RedirectIfAuth/RedirectIfAuth\";\n\nexport default function Login() {\n    const [name, setName] = useState('');\n    const [password, setPassword] = useState('');\n\n    const navigate = useNavigate();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        const response = await loginUser(name, password);\n        if (response.status === 401) {\n            alert(\"Введен неверный пароль\");\n            return;\n        }\n\n        if (!response.ok) {\n            const text = await response.text();\n            console.error(\"Ошибка сервера:\", text);\n            return;\n        }\n\n        const data = await response.json();\n        localStorage.setItem('jwtToken', data.token)\n\n        navigate('/library')\n        console.log(data.token); // должен вывести ответ от бекенда\n    };\n\n    return (\n        <RedirectIfAuth>\n        <div className=\"login\">\n            <Header />\n            <div className=\"login__content\">\n                <div className=\"container\">\n                    <div className=\"login__content__column\">\n                        <div className=\"login__title\">\n                            Авторизация\n                        </div>\n                        <form className=\"login__form\" onSubmit={handleSubmit}>\n\n                            {/*--- name ---*/}\n                            <div className=\"login__form__group\">\n                                <label\n                                    htmlFor=\"login-username\"\n                                    className=\"login__form__group__title\">\n                                    Имя пользователя\n                                </label>\n                                <input id=\"login-username\" type=\"text\"\n                                       placeholder=\"Введите имя...\"\n                                       className=\"login__form__group__input\"\n                                       value={name} required\n                                onChange={(e) => setName(e.target.value)}/>\n                            </div>\n\n                            {/*--- password ---*/}\n                            <div className=\"login__form__group\">\n                                <label\n                                    htmlFor=\"login-password\"\n                                    className=\"login__form__group__title\">\n                                    Пароль\n                                </label>\n                                <input id=\"login-password\" type=\"password\"\n                                       placeholder=\"Введите пароль...\"\n                                       className=\"login__form__group__input\"\n                                       value={password} required\n                                onChange={(e) => setPassword(e.target.value)}/>\n                            </div>\n\n                            {/*--- submit ---*/}\n                            <button className=\"login__submit\" type=\"submit\">\n                                Войти\n                            </button>\n\n                        </form>\n                        <div className=\"login__noAccount\">\n                            Нет аккаунта?\n                            <a href=\"/register\" className=\"login__noAccount__link\">\n                                Зарегистрироваться\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </RedirectIfAuth>\n    );\n}\n\n// <div className=\"register__content\">\n//     <div className=\"container\">\n//         <div className=\"register__content__column\">\n//             <div className=\"register__title\">"],"names":["_ref","children","navigate","useNavigate","useEffect","localStorage","getItem","Login","name","setName","useState","password","setPassword","_jsx","RedirectIfAuth","_jsxs","className","Header","onSubmit","async","e","preventDefault","response","loginUser","status","alert","ok","text","console","error","data","json","setItem","token","log","htmlFor","id","type","placeholder","value","required","onChange","target","href"],"sourceRoot":""}